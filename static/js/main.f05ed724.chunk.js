(this["webpackJsonpweb-plotter"]=this["webpackJsonpweb-plotter"]||[]).push([[0],{103:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ParserImpl}));var D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(104),D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13),D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(65),D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(66),ParserImpl=function(){function ParserImpl(){Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,ParserImpl),this.variables=void 0}return Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(ParserImpl,[{key:"evaluate",value:function(e,t){this.variables=t,e=e.replace(/\s+/g,"");var a=this._parse(e),r=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(a,1)[0];return parseFloat(r)}},{key:"_parse",value:function(e){var t=this;return this._evalOperation(e,[{mathSymbol:"+",jsOperation:"+"},{mathSymbol:"-",jsOperation:"-"}],(function(e){return t._evalOperation(e,[{mathSymbol:"*",jsOperation:"*"},{mathSymbol:"/",jsOperation:"/"},{mathSymbol:"%",jsOperation:"%"}],(function(e){return t._evalOperation(e,[{mathSymbol:"^",jsOperation:"**"}],(function(e){return t._brackets(e,(function(e){return t._getVariable(e,(function(e){return t._getNumber(e)}))}))}))}))}))}},{key:"_evalOperation",value:function _evalOperation(expression,opSymbols,getNumberFunc){var result,_getNumberFunc=getNumberFunc(expression),_getNumberFunc2=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_getNumberFunc,2),number=_getNumberFunc2[0],newStr=_getNumberFunc2[1];for(result=number;newStr;){var isSymbolPresent=!1;if(opSymbols.forEach((function(opSymbol){if(newStr.startsWith(opSymbol.mathSymbol)){newStr=newStr.replace(opSymbol.mathSymbol,"");var _getNumberFunc3=getNumberFunc(newStr),_getNumberFunc4=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_getNumberFunc3,2),_number=_getNumberFunc4[0],_newStr=_getNumberFunc4[1];result=eval("(".concat(result,")").concat(opSymbol.jsOperation,"(").concat(_number,")")),newStr=_newStr,isSymbolPresent=!0}})),!isSymbolPresent)break}return[result,newStr]}},{key:"_brackets",value:function(e,t){var a=this._getSign(e),r=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(a,2),_=r[0],n=r[1];if(n.startsWith("(")){n=n.replace("(","");var i=this._parse(n),s=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(i,2),o=s[0],l=s[1];if(l.startsWith(")")){l=l.replace(")","");var c=this._getSign(_+o),u=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(c,2);return[(_=u[0])+(o=u[1]),l]}throw"Missing rigth bracket!"}return t(e)}},{key:"_getVariable",value:function(e,t){var a=this._getSign(e),r=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(a,2),_=r[0],n=r[1];if(this.variables){var i,s=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(this.variables);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(n.startsWith(o.name)){n=n.replace(o.name,"");var l=this._getSign(_+o.value),c=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(l,2);return[(_=c[0])+c[1],n]}}}catch(u){s.e(u)}finally{s.f()}}return t(e)}},{key:"_getNumber",value:function(e){for(var t="",a=this._getSign(e),r=Object(D_Work_dmitrii92_web_plotter_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(a,2),_=r[0],n=r[1],i=0;i<n.length;i++){var s=n[i];if(!s.match("[.0-9]"))break;t+=s}return[_+t,n=n.replace(t,"")]}},{key:"_getSign",value:function(e){for(var t="",a=e,r=0;"-"===e[r];)r++,a=a.replace("-","");return 1===r%2&&(t="-"),[t,a]}}]),ParserImpl}()},117:function(e,t,a){e.exports=a(168)},168:function(e,t,a){"use strict";a.r(t);a(118);var r=a(0),_=a.n(r),n=a(8),i=a.n(n),s=a(12),o=a(68),l=Object(o.b)({name:"calculator",initialState:{expression:"x^2",min:-10,max:10,calcType:"custom"},reducers:{calculate:function(e,t){e.expression=t.payload.expression,e.min=t.payload.min,e.max=t.payload.max},changeCalculator:function(e,t){e.calcType=t.payload}}}),c=l.actions.calculate,u=l.actions.changeCalculator,m=function(e){return e.calculator.expression},h=function(e){return e.calculator.min},b=function(e){return e.calculator.max},p=function(e){return e.calculator.calcType},d=l.reducer,v=a(102),g=a.n(v),f=a(203),x=a(196),O=a(198),E=a(106),y=Object(x.a)((function(e){return Object(O.a)({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}})}));function W(){var e=y(),t=Object(s.b)(),a=Object(s.c)(m),r=Object(s.c)(h),n=Object(s.c)(b),i=Object(E.a)({initialValues:{expression:a,min:r,max:n},onSubmit:function(e){t(c({expression:e.expression,min:e.min,max:e.max}))},validate:function(e){var t={};return e.expression||(t.expression="Must be not empty"),e.min||0===e.min||(t.min="Must be not empty"),e.max||0===e.max||(t.max="Must be not empty"),e.min&&e.max&&e.min>=e.max&&(t.max="Max must be more then min"),t}});return _.a.createElement("div",null,_.a.createElement("form",{className:e.root,id:"calculator-form-id",noValidate:!0,autoComplete:"off",onSubmit:i.handleSubmit},_.a.createElement("div",null,_.a.createElement(f.a,{id:"id-expression",name:"expression",required:!0,label:"Expression",value:i.values.expression,onChange:i.handleChange,error:!!i.errors.expression,helperText:i.errors.expression}),_.a.createElement("div",null,_.a.createElement(f.a,{id:"id-min",name:"min",required:!0,label:"Min",value:i.values.min,onChange:i.handleChange,error:!!i.errors.min,helperText:i.errors.min,type:"number"}),_.a.createElement(f.a,{id:"id-max",name:"max",required:!0,label:"Max",value:i.values.max,onChange:i.handleChange,error:!!i.errors.max,helperText:i.errors.max,type:"number"}))),_.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit"},"Plot")))}var k=a(13),w=a(65),M=a(66),P=a(103),j=function(){function e(t,a){Object(w.a)(this,e),this.ctx=void 0,this.canvasWidth=void 0,this.canvasHeigth=void 0,this.graphWidth=void 0,this.graphHeigth=void 0,this.scaleX=1,this.scaleY=1,this.canvasWidth=t,this.canvasHeigth=a,this.graphWidth=.8*t,this.graphHeigth=.8*a}return Object(M.a)(e,[{key:"setCanvas",value:function(e){this.ctx=e.getContext("2d"),this.ctx.fillStyle="#000000",this._drawAxis()}},{key:"_convertXY",value:function(e,t){return[this.canvasWidth/2+e*this.scaleX,this.canvasHeigth/2-t*this.scaleY]}},{key:"_drawAxis",value:function(e,t){this.ctx.beginPath(),this.ctx.moveTo(0,this.canvasHeigth/2),this.ctx.lineTo(this.canvasWidth,this.canvasHeigth/2),this.ctx.stroke();this.ctx.font="14px serif";var a=this.canvasWidth/2+this.graphWidth/2,r=this.canvasWidth/2-this.graphWidth/2,_=this.canvasHeigth/2,n=this.canvasHeigth/2,i=e,s=t;Math.abs(e)<Math.abs(t)?(a=this.canvasWidth/2+this.graphWidth/2*(e/t),r=this.canvasWidth/2+this.graphWidth/2,i=t,s=e):Math.abs(e)>Math.abs(t)&&(a=this.canvasWidth/2-this.graphWidth/2*(t/e),r=this.canvasWidth/2-this.graphWidth/2),this.ctx.beginPath(),this.ctx.moveTo(a,_-3),this.ctx.lineTo(a,_+3),this.ctx.stroke(),this.ctx.fillText(s,a+2,_+15),this.ctx.beginPath(),this.ctx.moveTo(r,n-3),this.ctx.lineTo(r,n+3),this.ctx.stroke(),this.ctx.fillText(i,r+2,n+15),this.ctx.beginPath(),this.ctx.moveTo(this.canvasWidth/2,0),this.ctx.lineTo(this.canvasWidth/2,this.canvasHeigth),this.ctx.stroke()}},{key:"plot",value:function(e,t,a){var r=this;this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeigth);var _=new P.a,n=Math.max(Math.abs(t),Math.abs(a)),i=n/this.graphWidth;this.scaleX=this.graphWidth/2/n;for(var s=[],o=0,l=t;l<=a;l+=i){var c=_.evaluate(e,[{name:"x",value:l}]);s.push({x:l,y:c}),o=Math.max(o,Math.abs(c))}var u=this._cutBreakpoint(s,o);o=0,u.map((function(e){void 0!==e.y&&(o=Math.max(o,Math.abs(e.y)))})),this.scaleY=this.scaleX,this.ctx.beginPath(),u.map((function(e){if(void 0!==e.y){var t=r._convertXY(e.x,e.y),a=Object(k.a)(t,2),_=a[0],n=a[1];r.ctx.lineTo(_,n)}else r.ctx.stroke(),r.ctx.beginPath()})),this.ctx.stroke(),this._drawAxis(t,a)}},{key:"_cutBreakpoint",value:function(e,t){var a=e.slice();return e.map((function(e,a,r){if(t===Math.abs(e.y))for(var _=0;_<5;_++)r[a+_]&&(r[a+_].y=void 0),r[a-_]&&(r[a-_].y=void 0)})),a}}]),e}(),D=function(){var e=Object(r.useRef)(null),t=new j(400,400),a=Object(s.c)(m),n=Object(s.c)(h),i=Object(s.c)(b);return Object(r.useEffect)((function(){a&&(t.setCanvas(e.current),t.plot(a,n,i))}),[a,n,i]),_.a.createElement("div",{style:{padding:"10px"}},_.a.createElement("canvas",{ref:e,width:400,height:400}))},T=a(105),S=a.n(T),C=a(201),A=a(205),I=function(){var e=Object(s.c)(m),t=Object(s.c)(h),a=Object(s.c)(b),n=Object(r.useState)(null),i=Object(k.a)(n,2),o=i[0],l=i[1],c=Object(r.useState)(!1),u=Object(k.a)(c,2),p=u[0],d=u[1],v=Object(r.useState)(""),g=Object(k.a)(v,2),f=g[0],x=g[1];return Object(r.useEffect)((function(){var r=!1;return e&&(d(!0),x(""),l(null),function(e){var t="".concat("https://wolfram-api.herokuapp.com","/plot/");return S.a.get(t,{params:{expression:e}}).then((function(e){return e.data}))}("".concat(e,", x = ").concat(t," to ").concat(a)).then((function(e){r||l(e)})).catch((function(e){e.response?x(e.response.data):x(e.message)})).finally((function(){d(!1)}))),function(){return r=!0}}),[e,t,a]),_.a.createElement("div",{style:{padding:"10px"}},p?_.a.createElement(C.a,null):null,f?_.a.createElement(A.a,{severity:"error"},f):null,o?_.a.createElement("img",{src:o.imgSrc,width:o.imgWidth,height:o.imgHeigth,alt:"Plot"}):null)},B=a(207),R=a(208),F=a(199),K=a(204),L=a(206);var N=function(){var e=Object(s.b)(),t=Object(s.c)(p);return _.a.createElement("div",null,_.a.createElement(B.a,{component:"fieldset"},_.a.createElement(F.a,{component:"legend"},"Calculator type"),_.a.createElement(L.a,{"aria-label":"gender",name:"gender1",value:t,onChange:function(t){e(u(t.target.value))}},_.a.createElement(R.a,{value:"custom",control:_.a.createElement(K.a,null),label:"Custom"}),_.a.createElement(R.a,{value:"wolfram",control:_.a.createElement(K.a,null),label:"Wolfram"}))),_.a.createElement(W,null),"custom"===t?_.a.createElement(D,null):_.a.createElement(I,null))},U=Object(o.a)({reducer:{calculator:d}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(_.a.createElement(_.a.StrictMode,null,_.a.createElement(s.a,{store:U},_.a.createElement(N,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[117,1,2]]]);
//# sourceMappingURL=main.f05ed724.chunk.js.map